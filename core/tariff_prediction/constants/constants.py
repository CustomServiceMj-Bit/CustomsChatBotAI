# 관세 예측 모듈 통합 상수 파일

# 환율 지원 국가 목록
SUPPORTED_COUNTRIES = {
    '미국': 'USD', '일본': 'JPY', '유럽연합': 'EUR', '중국': 'CNY',
    '독일': 'EUR', '프랑스': 'EUR', '이탈리아': 'EUR', '스페인': 'EUR',
    '네덜란드': 'EUR', '벨기에': 'EUR', '오스트리아': 'EUR', '그리스': 'EUR',
    '포르투갈': 'EUR', '아일랜드': 'EUR', '핀란드': 'EUR', '룩셈부르크': 'EUR',
    '스웨덴': 'EUR', '덴마크': 'EUR', '폴란드': 'EUR', '체코': 'EUR',
    '헝가리': 'EUR', '슬로바키아': 'EUR', '슬로베니아': 'EUR', '에스토니아': 'EUR',
    '라트비아': 'EUR', '리투아니아': 'EUR', '몰타': 'EUR', '키프로스': 'EUR',
    '크로아티아': 'EUR', '루마니아': 'EUR', '불가리아': 'EUR'
}

# 시나리오 관련 상수
SCENARIOS = {
    '1': '해외직구',
    '2': '해외체류 중 구매', 
    '3': '해외배송'
}

VALID_SCENARIOS = ['해외직구', '해외체류 중 구매', '해외배송']

# 키워드 관련 상수
OFF_TOPIC_KEYWORDS = [
    '날씨', '음식', '영화', '음악', '운동', '취미', '가족', '친구',
    '일', '학교', '공부', '시험', '여행', '휴가', '주말', '주중',
    '아침', '점심', '저녁', '잠', '병원', '약', '건강', '운동'
]

REMOVE_KEYWORDS = [
    '원', '달러', '엔', '위안', '유로', '만원', '천원', 
    '개', '개씩', '개를', '샀', '구매', '에서', '에서 샀', '에서 구매'
]

CORRECTION_KEYWORDS = ['수정', '잘못', '다시', '틀렸']

SESSION_TERMINATION_KEYWORDS = ['중단', '그만', '취소', '종료']

# 재예측 관련 키워드
REPREDICTION_KEYWORDS = [
    "없다", "코드가 없다", "재예측", "다시", "틀렸다", "맞지 않다", 
    "다른", "새로", "다시 예측", "다른 코드", "적합하지 않다", "코드가 없어"
]

# 간단한 관세 요청 키워드
SIMPLE_TARIFF_REQUESTS = [
    "관세 계산해줘", "관세 예측해줘", "관세 계산", "관세 예측", 
    "세금 계산해줘", "세금 예측해줘"
]

# 관세 관련 키워드 (탈선 판단용)
TARIFF_CONTEXT_KEYWORDS = [
    '관세', '세금', '통관', 'hs', '코드', '가격', '원', '달러', '엔', '유로'
]

# 기본 환율 정보 (API 실패 시 사용)
DEFAULT_EXCHANGE_RATES = {
    '달러': 1300, 
    '엔': 9, 
    '위안': 180, 
    '유로': 1400
}

# 정규표현식 패턴 상수
PRICE_PATTERNS = [
    r'(\d+)[,\s]*원',
    r'(\d+)[,\s]*달러',
    r'(\d+)[,\s]*엔',
    r'(\d+)[,\s]*위안',
    r'(\d+)[,\s]*유로',
    r'(\d+)[,\s]*만원',
    r'(\d+)[,\s]*천원'
]

QUANTITY_PATTERNS = [
    r'(\d+)[\s]*개',
    r'(\d+)[\s]*개씩',
    r'(\d+)[\s]*개를',
    r'(\d+)[\s]*개 샀',
    r'(\d+)[\s]*개 구매'
]

# 기본값 상수
DEFAULT_COUNTRY = "미국"
DEFAULT_QUANTITY = 1
DEFAULT_SHIPPING_COST = 0
DEFAULT_SESSION_ID = "default_session"

# 입력 예시 상수
INPUT_EXAMPLES = {
    'basic': [
        "미국에서 150만원에 노트북을 샀어요",
        "일본에서 10만원짜리 이어폰을 구매했어요", 
        "독일에서 80만원에 운동화 2켤레를 샀어요"
    ],
    'detailed': [
        "인텔 i7 노트북을 150만원에 미국에서 구매했어요"
    ],
    'scenario': [
        "1번", "해외직구", "여행 중에 샀어요"
    ],
    'selection': [
        "1번", "2번", "3번"
    ]
}

# 안내 메시지 상수
GUIDE_MESSAGES = {
    'input_format': "💡 **다음과 같이 입력해 주세요:**",
    'select_number': "💡 **위 후보 중 하나를 선택해 주세요.**",
    'enter_number': "💡 **번호를 입력해 주세요.**",
    'wrong_number': "**잘못된 번호입니다.**",
    'number_range': "1부터 {max} 사이의 번호를 다시 입력해 주세요.",
    'number_example': "예시: \"1번\", \"2번\", \"3번\" 등",
    'reprediction_hint': "만약 후보가 모두 적합하지 않으면 '코드가 없다', '다시', '재예측' 등으로 입력해 주세요."
}

# 오류 메시지 상수
ERROR_MESSAGES = {
    'no_product_name': "상품명을 알 수 없어 HS 코드 예측을 다시 시도할 수 없습니다. 처음부터 다시 입력해 주세요.",
    'parse_error': "HS 코드 예측 결과를 처리하는 중 오류가 발생했습니다. 다시 시도해 주세요.",
    'prediction_failed': "HS 코드 예측에 실패했습니다. 상품명을 더 구체적으로 입력해 주세요.",
    'reprediction_failed': "HS 코드 예측에 다시 실패했습니다. 상품명을 더 구체적으로 입력해 주세요.",
    'reprediction_error': "HS 코드 재예측 중 오류가 발생했습니다. 다시 시도해 주세요.",
    'no_hs6_code': "HS6 코드가 없어 HS10 코드 예측을 다시 시도할 수 없습니다. HS6 코드부터 다시 선택해 주세요.",
    'hs10_prediction_failed': "HS10 코드 예측에 실패했습니다. HS6 코드를 다시 선택해 주세요.",
    'hs10_reprediction_error': "HS10 코드 재예측 중 오류가 발생했습니다. 다시 시도해 주세요.",
    'input_processing_error': "입력 처리 중 오류가 발생했습니다. 숫자를 입력하거나, 재예측을 원하시면 '다시', '재예측' 등으로 입력해 주세요.",
    'unknown_state': "죄송합니다. 현재 상태를 인식할 수 없습니다. 처음부터 다시 시작하겠습니다.",
    'calculation_failed': "계산 결과를 가져오지 못했습니다.",
    'session_terminated': "관세 계산을 중단하겠습니다. 다른 질문이 있으시면 언제든 말씀해 주세요."
}

# 수정 안내 메시지 상수
CORRECTION_MESSAGES = {
    'scenario_selection': "어떤 정보를 수정하시겠습니까?\n1. 시나리오\n2. 상품 정보\n3. 처음부터 다시 시작",
    'input_collection': "어떤 정보를 수정하시겠습니까?\n1. 상품묘사\n2. 국가\n3. 가격\n4. 수량\n5. 배송비\n6. 처음부터 다시 시작"
}

# LLM 프롬프트 상수
LLM_PROMPTS = {
    'reprediction_intent': """사용자의 입력이 HS 코드 후보가 적합하지 않아서 재예측을 요청하는 의도인지 판단해주세요.

재예측 의도로 보이는 키워드: "없다", "코드가 없다", "재예측", "다시", "틀렸다", "맞지 않다", "다른", "새로", "다시 예측", "다른 코드", "적합하지 않다"

사용자 입력: {user_input}

위 입력이 재예측을 요청하는 의도인지 판단하여 '네' 또는 '아니오'로만 답변하세요. 반드시 한 단어로만 답변하세요.""",
    
    'hs6_reprediction': """아래 상품명과 사용자의 추가 의견을 참고하여 HS 코드 후보를 예측해주세요.

상품명: {product_name}
사용자 추가 의견: {user_input}

다음 형식으로 HS 코드 후보 3개 이내를 반환하세요:
1. [6자리 HS코드] (확률: [확률]%)
2. [6자리 HS코드] (확률: [확률]%)
3. [6자리 HS코드] (확률: [확률]%)

예시:
1. 851770 (확률: 85.5%)
2. 851712 (확률: 12.3%)
3. 851713 (확률: 2.2%)"""
} 